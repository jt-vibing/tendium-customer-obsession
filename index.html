<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Build Hub — Tendium Customer Graph</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* ================================================================
       CSS Custom Properties — Linear-inspired design system
    ================================================================ */
    :root {
      --base-bg: #FFFFFF;
      --elevated-bg: #F7F8F8;
      --surface-bg: #ECEEF0;
      --hover: rgba(0,0,0,0.04);
      --active: rgba(0,0,0,0.06);
      --text-primary: #171717;
      --text-secondary: #6B6B76;
      --text-tertiary: #A1A1A6;
      --border: rgba(0,0,0,0.08);
      --border-strong: rgba(0,0,0,0.12);
      --accent: #5E6AD2;
      --accent-subtle: rgba(94,106,210,0.12);
      --accent-hover: #4F5BC4;
      --success: #16A34A;
      --success-subtle: rgba(22,163,74,0.10);
      --warning: #D97706;
      --warning-subtle: rgba(217,119,6,0.10);
      --radius: 6px;
      --radius-lg: 10px;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --shadow-lg: 0 12px 40px rgba(0,0,0,0.12);
      --nav-height: 48px;
      --backdrop-bg: rgba(0,0,0,0.4);
    }

    [data-theme="dark"] {
      --base-bg: #0A0A0B;
      --elevated-bg: #131316;
      --surface-bg: #1B1B1F;
      --hover: rgba(255,255,255,0.04);
      --active: rgba(255,255,255,0.06);
      --text-primary: #EDEDEF;
      --text-secondary: #8B8B96;
      --text-tertiary: #5C5C66;
      --border: rgba(255,255,255,0.06);
      --border-strong: rgba(255,255,255,0.10);
      --accent: #7B83EB;
      --accent-subtle: rgba(123,131,235,0.14);
      --accent-hover: #8D94F0;
      --success: #4ADE80;
      --success-subtle: rgba(74,222,128,0.12);
      --warning: #FBBF24;
      --warning-subtle: rgba(251,191,36,0.12);
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.2);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.3);
      --shadow-lg: 0 12px 40px rgba(0,0,0,0.4);
      --backdrop-bg: rgba(0,0,0,0.6);
    }

    /* ================================================================
       Reset & Base
    ================================================================ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--base-bg);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    button { font-family: inherit; cursor: pointer; border: none; background: none; }

    /* ================================================================
       Top Navigation Bar
    ================================================================ */
    .nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      height: var(--nav-height);
      background: var(--elevated-bg);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      padding: 0 16px;
      gap: 12px;
    }

    .nav-brand {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      border-radius: var(--radius);
      text-decoration: none;
      color: var(--text-primary);
      transition: background 120ms ease;
      flex-shrink: 0;
    }
    .nav-brand:hover { background: var(--hover); }

    .nav-brand-icon {
      width: 24px;
      height: 24px;
      border-radius: 6px;
      background: linear-gradient(135deg, var(--accent), #8B5CF6);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 11px;
      font-weight: 700;
      line-height: 1;
    }

    .nav-brand-label {
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
    }

    .nav-divider {
      width: 1px;
      height: 20px;
      background: var(--border-strong);
      flex-shrink: 0;
    }

    .nav-tabs {
      display: flex;
      align-items: center;
      gap: 2px;
      flex: 1;
      overflow-x: auto;
      scrollbar-width: none;
    }
    .nav-tabs::-webkit-scrollbar { display: none; }

    .nav-tab {
      font-size: 13px;
      font-weight: 500;
      color: var(--text-secondary);
      padding: 6px 12px;
      border-radius: var(--radius);
      transition: color 120ms ease, background 120ms ease;
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .nav-tab:hover { color: var(--text-primary); background: var(--hover); }
    .nav-tab.active {
      color: var(--text-primary);
      background: var(--active);
      font-weight: 600;
    }

    .nav-tab-badge {
      font-size: 10px;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 4px;
      background: var(--success-subtle);
      color: var(--success);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-shrink: 0;
    }

    .nav-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: var(--radius);
      color: var(--text-secondary);
      transition: color 120ms ease, background 120ms ease;
    }
    .nav-btn:hover { color: var(--text-primary); background: var(--hover); }
    .nav-btn svg { width: 16px; height: 16px; flex-shrink: 0; }

    /* ================================================================
       Tab Panels
    ================================================================ */
    .tab-panels {
      position: fixed;
      top: var(--nav-height);
      left: 0;
      right: 0;
      bottom: 0;
    }

    .tab-panel {
      display: none;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }
    .tab-panel.active { display: block; }

    .tab-panel iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: var(--base-bg);
    }

    /* ================================================================
       Responsive
    ================================================================ */
    @media (max-width: 768px) {
      .nav { padding: 0 8px; gap: 8px; }
      .nav-brand-label { display: none; }
      .nav-tabs { gap: 1px; }
      .nav-tab { padding: 6px 10px; font-size: 12px; }
    }
  </style>
</head>
<body>

  <!-- ============================================================
       Top Navigation Bar
  ============================================================ -->
  <nav class="nav">
    <a class="nav-brand" href="#architecture" id="nav-home">
      <div class="nav-brand-icon">CG</div>
      <span class="nav-brand-label">Customer Graph</span>
    </a>

    <div class="nav-divider"></div>

    <div class="nav-tabs">
      <button class="nav-tab active" data-tab="problem">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="8" cy="8" r="6"/><path d="M8 5v3M8 10.5v.5"/></svg>
        Problem
      </button>
      <button class="nav-tab" data-tab="journey">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 8h12M10 4l4 4-4 4"/></svg>
        Journey
      </button>
      <button class="nav-tab" data-tab="tech">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="2" width="5" height="5" rx="1"/><rect x="9" y="2" width="5" height="5" rx="1"/><rect x="2" y="9" width="5" height="5" rx="1"/><rect x="9" y="9" width="5" height="5" rx="1"/></svg>
        Tech
      </button>
      <button class="nav-tab" data-tab="versions">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="8" cy="4" r="2"/><circle cx="8" cy="8" r="2"/><circle cx="8" cy="12" r="2"/><path d="M8 6v2M8 10v2"/></svg>
        Versions
      </button>
      <button class="nav-tab" data-tab="design">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="10" height="10" rx="1"/><path d="M3 6h10M6 3v10"/></svg>
        Design
      </button>
      <button class="nav-tab" data-tab="preview">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="8" cy="8" r="6"/><circle cx="8" cy="8" r="2"/></svg>
        Live Build
        <span class="nav-tab-badge">V3</span>
      </button>
    </div>

    <div class="nav-right">
      <button class="nav-btn" id="theme-toggle" title="Toggle theme">
        <svg class="icon-sun" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="8" r="3"/><path d="M8 1.5v1M8 13.5v1M1.5 8h1M13.5 8h1M3.4 3.4l.7.7M11.9 11.9l.7.7M3.4 12.6l.7-.7M11.9 4.1l.7-.7"/></svg>
        <svg class="icon-moon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="display:none"><path d="M13.2 10.5A5.5 5.5 0 015.5 2.8a5.5 5.5 0 107.7 7.7z"/></svg>
      </button>
    </div>
  </nav>

  <!-- ============================================================
       Tab Panels
  ============================================================ -->
  <div class="tab-panels">
    <div class="tab-panel active" data-panel="problem">
      <iframe src="problem/index.html" loading="lazy"></iframe>
    </div>
    <div class="tab-panel" data-panel="journey">
      <iframe src="aarrr/option-a.html" loading="lazy"></iframe>
    </div>
    <div class="tab-panel" data-panel="tech">
      <iframe src="tech/index.html" loading="lazy"></iframe>
    </div>
    <div class="tab-panel" data-panel="versions">
      <iframe src="versions/index.html" loading="lazy"></iframe>
    </div>
    <div class="tab-panel" data-panel="design">
      <iframe src="design/index.html" loading="lazy"></iframe>
    </div>
    <div class="tab-panel" data-panel="preview">
      <iframe src="preview/index.html" loading="lazy"></iframe>
    </div>
  </div>

  <!-- ============================================================
       JavaScript
  ============================================================ -->
  <script>
    (function () {
      // ---- Theme Management ----
      const root = document.documentElement;
      const iconSun = document.querySelector('.icon-sun');
      const iconMoon = document.querySelector('.icon-moon');
      const iframes = document.querySelectorAll('.tab-panel iframe');

      function getSystemTheme() {
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }

      function getTheme() {
        return localStorage.getItem('build-hub-theme') || getSystemTheme();
      }

      function applyTheme(theme) {
        root.setAttribute('data-theme', theme);
        iconSun.style.display = theme === 'dark' ? 'none' : 'block';
        iconMoon.style.display = theme === 'dark' ? 'block' : 'none';
        syncIframeThemes(theme);
      }

      function syncIframeThemes(theme) {
        iframes.forEach(function (iframe) {
          try {
            if (iframe.contentDocument && iframe.contentDocument.documentElement) {
              iframe.contentDocument.documentElement.setAttribute('data-theme', theme);
            }
          } catch (e) { /* cross-origin */ }
          try {
            iframe.contentWindow.postMessage({ type: 'theme-change', theme: theme }, '*');
          } catch (e) {}
        });
      }

      // Apply on load
      applyTheme(getTheme());

      // Sync when each iframe loads
      iframes.forEach(function (iframe) {
        iframe.addEventListener('load', function () {
          var theme = getTheme();
          try {
            if (iframe.contentDocument && iframe.contentDocument.documentElement) {
              iframe.contentDocument.documentElement.setAttribute('data-theme', theme);
            }
          } catch (e) {}
          try {
            iframe.contentWindow.postMessage({ type: 'theme-change', theme: theme }, '*');
          } catch (e) {}
        });
      });

      // Toggle
      document.getElementById('theme-toggle').addEventListener('click', function () {
        var current = root.getAttribute('data-theme') || getTheme();
        var next = current === 'dark' ? 'light' : 'dark';
        localStorage.setItem('build-hub-theme', next);
        applyTheme(next);
      });

      // Listen for system changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function () {
        if (!localStorage.getItem('build-hub-theme')) {
          applyTheme(getSystemTheme());
        }
      });

      // ---- Tab Switching ----
      var tabs = document.querySelectorAll('.nav-tab');
      var panels = document.querySelectorAll('.tab-panel');

      function switchTab(tabName, updateHash) {
        tabs.forEach(function (t) { t.classList.toggle('active', t.dataset.tab === tabName); });
        panels.forEach(function (p) { p.classList.toggle('active', p.dataset.panel === tabName); });

        // Persist active tab in URL hash
        if (updateHash !== false) {
          history.replaceState(null, '', '#' + tabName);
        }
      }

      tabs.forEach(function (tab) {
        tab.addEventListener('click', function () { switchTab(tab.dataset.tab); });
      });

      // Restore tab from URL hash on load
      var hashTab = location.hash.replace('#', '');
      var validTabs = Array.from(tabs).map(function (t) { return t.dataset.tab; });
      if (hashTab && validTabs.indexOf(hashTab) !== -1) {
        switchTab(hashTab);
      }

      // Handle browser back/forward
      window.addEventListener('hashchange', function () {
        var ht = location.hash.replace('#', '');
        if (ht && validTabs.indexOf(ht) !== -1) {
          switchTab(ht, false);
        }
      });

      // ---- Logo → Home ----
      document.getElementById('nav-home').addEventListener('click', function (e) {
        e.preventDefault();
        switchTab('problem');
      });

      // ---- Keyboard Navigation ----
      document.addEventListener('keydown', function (e) {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
        var current = document.querySelector('.nav-tab.active');
        var idx = validTabs.indexOf(current.dataset.tab);
        if (e.key >= '1' && e.key <= String(validTabs.length)) {
          switchTab(validTabs[parseInt(e.key) - 1]);
        } else if (e.key === 'ArrowRight' && idx < validTabs.length - 1) {
          e.preventDefault();
          switchTab(validTabs[idx + 1]);
        } else if (e.key === 'ArrowLeft' && idx > 0) {
          e.preventDefault();
          switchTab(validTabs[idx - 1]);
        }
      });
    })();
  </script>
</body>
</html>
