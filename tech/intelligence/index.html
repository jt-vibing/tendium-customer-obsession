<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intelligence Layer — Customer Graph</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #FFFFFF;
      --bg-elevated: #F7F8F8;
      --bg-surface: #ECEEF0;
      --text-primary: #171717;
      --text-secondary: #6B6B76;
      --text-tertiary: #A1A1A6;
      --border: rgba(0,0,0,0.08);
      --border-strong: rgba(0,0,0,0.12);
      --accent: #5E6AD2;
      --accent-subtle: rgba(94,106,210,0.10);
      --success: #16A34A;
      --warning: #D97706;
      --purple: #7C3AED;
      --purple-subtle: rgba(124,58,237,0.08);
      --radius: 6px;
      --radius-lg: 10px;
      --shadow: 0 1px 3px rgba(0,0,0,0.06);
    }

    [data-theme="dark"] {
      --bg: #0A0A0B;
      --bg-elevated: #111114;
      --bg-surface: #18181C;
      --text-primary: #EDEDEF;
      --text-secondary: #8B8B96;
      --text-tertiary: #5C5C66;
      --border: rgba(255,255,255,0.06);
      --border-strong: rgba(255,255,255,0.10);
      --accent: #7B83EB;
      --accent-subtle: rgba(123,131,235,0.12);
      --success: #4ADE80;
      --warning: #FBBF24;
      --purple: #A78BFA;
      --purple-subtle: rgba(167,139,250,0.10);
      --shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      line-height: 1.5;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 48px 32px 80px;
    }

    .page-header {
      margin-bottom: 40px;
    }

    .page-header h1 {
      font-size: 32px;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 8px;
    }

    .page-header p {
      font-size: 16px;
      color: var(--text-secondary);
      max-width: 720px;
    }

    .tier-section {
      margin-bottom: 48px;
    }

    .tier-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .tier-number {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .tier-header h2 {
      font-size: 20px;
      font-weight: 600;
    }

    .tier-desc {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 20px;
      max-width: 720px;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }

    .feature-card {
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px;
      transition: box-shadow 200ms ease;
    }

    .feature-card:hover {
      box-shadow: var(--shadow);
    }

    .feature-name {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .feature-desc {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .feature-model {
      font-size: 11px;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent);
      background: var(--accent-subtle);
      padding: 4px 8px;
      border-radius: 4px;
      display: inline-block;
    }

    .principle-list {
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 32px;
    }

    .principle-list h3 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .principle-list ul {
      list-style: none;
      display: grid;
      gap: 12px;
    }

    .principle-list li {
      font-size: 14px;
      color: var(--text-secondary);
      padding-left: 28px;
      position: relative;
      line-height: 1.6;
    }

    .principle-list li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--success);
      font-weight: 700;
      font-size: 16px;
    }

    .principle-list li strong {
      color: var(--text-primary);
      font-weight: 600;
    }

    .coverage-banner {
      background: linear-gradient(135deg, var(--accent-subtle), var(--purple-subtle));
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px 24px;
      margin-bottom: 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .coverage-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-tertiary);
      margin-bottom: 4px;
    }

    .coverage-value {
      font-size: 28px;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
      color: var(--text-primary);
    }

    .coverage-stat {
      text-align: center;
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="page-header">
      <h1>Intelligence Layer</h1>
      <p>How AI powers each version — from no AI (V1) to Claude-first (V2/V3/V4).</p>
    </div>

    <div style="margin-bottom: 24px;">
      <div style="font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-tertiary); margin-bottom: 8px;">Version-Specific</div>
      <div style="display: flex; gap: 8px;">
        <span style="font-size: 12px; padding: 4px 10px; background: var(--bg-surface); color: var(--text-tertiary); border-radius: 4px;">V1: No AI</span>
        <span style="font-size: 12px; padding: 4px 10px; background: var(--accent-subtle); color: var(--accent); border-radius: 4px; font-weight: 600;">V2/V3/V4: Claude</span>
      </div>
    </div>

    <div style="background: var(--bg-elevated); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 24px; margin-bottom: 32px;">
      <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Intelligence by Version</h3>
      <div style="display: grid; gap: 12px;">
        <div style="padding: 12px 16px; background: var(--bg-surface); border-radius: var(--radius);">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">V1: No AI Layer</div>
          <div style="font-size: 12px; color: var(--text-secondary); line-height: 1.6;">Client-side keyword search only. No NL queries, no punch cards. Pre-built dashboard views.</div>
        </div>
        <div style="padding: 12px 16px; background: var(--accent-subtle); border-radius: var(--radius); border: 1px solid var(--accent);">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px; color: var(--accent);">V2: Custom Claude Integration</div>
          <div style="font-size: 12px; color: var(--text-secondary); line-height: 1.6;">Claude Sonnet 4.5 via Anthropic SDK. 21 tools, chat streaming, role-specific punch cards. But 60% of code rebuilds what Claude.ai already has.</div>
        </div>
        <div style="padding: 12px 16px; background: var(--accent-subtle); border-radius: var(--radius); border: 1px solid var(--accent);">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px; color: var(--accent);">V3: MCP Native (Current)</div>
          <div style="font-size: 12px; color: var(--text-secondary); line-height: 1.6;">Same 21 tools, same Claude Sonnet 4.5, but via MCP protocol. Zero UI code. Works in Claude.ai/Code/Cowork natively.</div>
        </div>
        <div style="padding: 12px 16px; background: var(--bg-surface); border-radius: var(--radius);">
          <div style="font-size: 13px; font-weight: 600; margin-bottom: 4px;">V4: Hybrid (Dashboard + Copilot)</div>
          <div style="font-size: 12px; color: var(--text-secondary); line-height: 1.6;">Structured dashboards for frequent views. AI copilot (V3 MCP tools) for ad-hoc questions. Best of both.</div>
        </div>
      </div>
    </div>

    <div style="border-top: 2px solid var(--border); margin: 32px 0; padding-top: 32px;">
      <h2 style="font-size: 20px; font-weight: 600; margin-bottom: 16px;">V2/V3 Intelligence (Current)</h2>
      <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">2-tier AI system: Client keyword search + Claude Sonnet 4.5 for NL queries and punch cards. No embeddings needed — 1,376 customers fit in context.</p>
    </div>

    <div class="coverage-banner">
      <div class="coverage-stat">
        <div class="coverage-label">Coverage (50-Q Stress Test)</div>
        <div class="coverage-value">96%</div>
      </div>
      <div class="coverage-stat">
        <div class="coverage-label">Questions Answered</div>
        <div class="coverage-value">48/50</div>
      </div>
      <div class="coverage-stat">
        <div class="coverage-label">Tools Available</div>
        <div class="coverage-value">21</div>
      </div>
      <div class="coverage-stat">
        <div class="coverage-label">Model</div>
        <div class="coverage-value" style="font-size: 16px;">Sonnet 4.5</div>
      </div>
    </div>

    <div class="principle-list">
      <h3>Core Principles</h3>
      <ul>
        <li><strong>Ground Truth Only:</strong> Every insight traces back to source data. No pre-aggregated views or caches that drift.</li>
        <li><strong>Query-Time Stitching:</strong> Join data on-demand by org_nr. Always fresh, always accurate.</li>
        <li><strong>2-Tier Search:</strong> Client-side keyword filter for speed, Claude NL for complex queries. Voyage AI deferred until >5K customers.</li>
        <li><strong>Read-Only Architecture:</strong> Customer Graph never writes to source systems. SQLite cache for performance only.</li>
        <li><strong>Context Fits in Prompt:</strong> 1,376 customers fit in Claude's 200K context. Embeddings only needed when we scale 4x.</li>
      </ul>
    </div>

    <!-- Tier 1: Search -->
    <div class="tier-section">
      <div class="tier-header">
        <div class="tier-number">1</div>
        <h2>Search (Discovery Layer)</h2>
      </div>
      <div class="tier-desc">
        Fast keyword search on client for instant filtering. Claude NL understands complex queries like "customers in Sweden on Light plan with <5 logins/month and renewal in 60 days."
      </div>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-name">Keyword Search</div>
          <div class="feature-desc">Client-side .filter() on company name, industry, location, plan. Sub-100ms response. No server round-trip.</div>
          <div class="feature-model">Client-side JS</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Natural Language Query</div>
          <div class="feature-desc">Claude translates "show me at-risk accounts" into multi-tool calls (getCustomerProfile + getUsage + getRenewalPipeline).</div>
          <div class="feature-model">Claude Sonnet 4.5</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Faceted Filters</div>
          <div class="feature-desc">Pre-built filters for plan tier, health score, region, renewal window. Composable via URL params.</div>
          <div class="feature-model">Client-side</div>
        </div>
      </div>
    </div>

    <!-- Tier 2: Punch Cards -->
    <div class="tier-section">
      <div class="tier-header">
        <div class="tier-number">2</div>
        <h2>Punch Cards (Role-Specific Intelligence)</h2>
      </div>
      <div class="tier-desc">
        When you open a customer, Claude generates a punch card tailored to your role — Sales sees pipeline, CS sees health, Product sees feature adoption. Same data, different lens.
      </div>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-name">Sales Punch Card</div>
          <div class="feature-desc">Upsell/cross-sell signals, renewal risk, MEDDIC from Garba, procurement history showing TAM.</div>
          <div class="feature-model">Claude Sonnet 4.5</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">CS Punch Card</div>
          <div class="feature-desc">Health score breakdown, usage trends, support ticket patterns, champion risk, engagement gaps.</div>
          <div class="feature-model">Claude Sonnet 4.5</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Product Punch Card</div>
          <div class="feature-desc">Feature adoption, filter/BidFlow usage, drop-off points, cohort comparisons, power user profiles.</div>
          <div class="feature-model">Claude Sonnet 4.5</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Leadership Punch Card</div>
          <div class="feature-desc">Portfolio health, segment performance, NRR drivers, churn risks, revenue concentration, strategic accounts.</div>
          <div class="feature-model">Claude Sonnet 4.5</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Marketing Punch Card</div>
          <div class="feature-desc">ICP fit score, procurement behavior, company group expansion, referral potential, case study candidates.</div>
          <div class="feature-model">Claude Sonnet 4.5</div>
        </div>
      </div>
    </div>

    <!-- Tools (Data + Aggregate + Action) -->
    <div class="tier-section">
      <div class="tier-header">
        <div class="tier-number">3</div>
        <h2>Tools (21 Available)</h2>
      </div>
      <div class="tier-desc">
        11 data tools (raw facts), 5 aggregate tools (cross-source analysis), 5 action tools (HITL operations). Claude chains these together to answer any question.
      </div>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-name">Data Tools (11)</div>
          <div class="feature-desc">getCustomerProfile, getSubscription, getUsage, getMeetings, getProcurement, getCompanyGroup, getRevenue, getEngagement, getSupport, getEmail, getTeam</div>
          <div class="feature-model">Direct DB reads</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Aggregate Tools (5)</div>
          <div class="feature-desc">getRenewalPipeline, getSegmentBreakdown, getRevenueAnalysis, getUsageTrends, getEngagementGaps — multi-source joins + calculations</div>
          <div class="feature-model">Query-time stitching</div>
        </div>
        <div class="feature-card">
          <div class="feature-name">Action Tools (5)</div>
          <div class="feature-desc">draftEmail, scheduleCall, flagAccount, createTask, generateCallPrep — HITL operations that Claude suggests, user approves</div>
          <div class="feature-model">Human-in-the-loop</div>
        </div>
      </div>
    </div>

  </div>

</body>
</html>
