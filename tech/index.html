<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tech — Tendium Customer Graph</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    var theme = localStorage.getItem('build-hub-theme') ||
      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', theme);
    window.addEventListener('message', function (e) {
      if (e.data && e.data.type === 'theme-change') {
        document.documentElement.setAttribute('data-theme', e.data.theme);
      }
    });
  </script>
  <style>
    /* ================================================================
       CSS Custom Properties — Linear-inspired design system
    ================================================================ */
    :root {
      --base-bg: #FFFFFF;
      --elevated-bg: #F7F8F8;
      --surface-bg: #ECEEF0;
      --hover: rgba(0,0,0,0.04);
      --active: rgba(0,0,0,0.06);
      --text-primary: #171717;
      --text-secondary: #6B6B76;
      --text-tertiary: #A1A1A6;
      --border: rgba(0,0,0,0.08);
      --border-strong: rgba(0,0,0,0.12);
      --accent: #5E6AD2;
      --accent-subtle: rgba(94,106,210,0.12);
      --success: #16A34A;
      --success-subtle: rgba(22,163,74,0.10);
      --radius: 6px;
      --sidebar-width: 220px;
    }

    [data-theme="dark"] {
      --base-bg: #0A0A0B;
      --elevated-bg: #131316;
      --surface-bg: #1B1B1F;
      --hover: rgba(255,255,255,0.04);
      --active: rgba(255,255,255,0.06);
      --text-primary: #EDEDEF;
      --text-secondary: #8B8B96;
      --text-tertiary: #5C5C66;
      --border: rgba(255,255,255,0.06);
      --border-strong: rgba(255,255,255,0.10);
      --accent: #7B83EB;
      --accent-subtle: rgba(123,131,235,0.14);
      --success: #4ADE80;
      --success-subtle: rgba(74,222,128,0.12);
    }

    /* ================================================================
       Reset & Base
    ================================================================ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--base-bg);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow: hidden;
    }

    button { font-family: inherit; cursor: pointer; border: none; background: none; }

    /* ================================================================
       Layout
    ================================================================ */
    .layout {
      display: grid;
      grid-template-columns: var(--sidebar-width) 1fr;
      height: 100vh;
    }

    /* ================================================================
       Sidebar
    ================================================================ */
    .sidebar {
      background: var(--base-bg);
      border-right: 1px solid var(--border);
      padding: 24px 0;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--surface-bg) transparent;
    }

    .sidebar-item {
      padding: 10px 24px;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 120ms ease;
      border-left: 3px solid transparent;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .sidebar-item:hover {
      background: var(--hover);
      color: var(--text-primary);
    }

    .sidebar-item.active {
      color: var(--accent);
      background: var(--accent-subtle);
      border-left-color: var(--accent);
      font-weight: 600;
    }

    .sidebar-item svg {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }

    .sidebar-divider {
      height: 1px;
      background: var(--border);
      margin: 16px 24px;
    }

    .sidebar-label {
      padding: 8px 24px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-tertiary);
    }

    /* ================================================================
       Content Area
    ================================================================ */
    .content {
      background: var(--elevated-bg);
      overflow: hidden;
      position: relative;
    }

    .content iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: var(--base-bg);
    }

    .content-panel {
      display: none;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    .content-panel.active {
      display: block;
    }

    /* ================================================================
       Responsive
    ================================================================ */
    @media (max-width: 768px) {
      .layout {
        grid-template-columns: 180px 1fr;
      }
      .sidebar-item {
        padding: 8px 16px;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>

  <div class="layout">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-label">Technical Spec</div>
      <button class="sidebar-item active" data-section="architecture">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="2" width="5" height="5" rx="1"/><rect x="9" y="2" width="5" height="5" rx="1"/>
          <rect x="2" y="9" width="5" height="5" rx="1"/><rect x="9" y="9" width="5" height="5" rx="1"/>
        </svg>
        Architecture
      </button>
      <button class="sidebar-item" data-section="data">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="3" width="12" height="10" rx="1"/><path d="M2 6h12"/>
          <circle cx="4.5" cy="4.5" r="0.5" fill="currentColor"/>
          <circle cx="6.5" cy="4.5" r="0.5" fill="currentColor"/>
        </svg>
        Data
      </button>
      <button class="sidebar-item" data-section="intelligence">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M8 2v12M2 8h12"/><circle cx="8" cy="8" r="3"/>
        </svg>
        Intelligence
      </button>
      <button class="sidebar-item" data-section="decisions">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M3 8l3 3 7-7"/>
        </svg>
        Decisions
      </button>
      <button class="sidebar-item" data-section="status">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="8" cy="8" r="6"/><path d="M8 4v4l3 2"/>
        </svg>
        Status
      </button>
    </div>

    <!-- Content Area -->
    <div class="content">
      <div class="content-panel active" data-panel="architecture">
        <iframe src="architecture/index.html" loading="lazy"></iframe>
      </div>
      <div class="content-panel" data-panel="data">
        <iframe src="data/index.html" loading="lazy"></iframe>
      </div>
      <div class="content-panel" data-panel="intelligence">
        <iframe src="intelligence/index.html" loading="lazy"></iframe>
      </div>
      <div class="content-panel" data-panel="decisions">
        <iframe src="decision/index.html" loading="lazy"></iframe>
      </div>
      <div class="content-panel" data-panel="status">
        <iframe src="../status/index.html" loading="lazy"></iframe>
      </div>
    </div>
  </div>

  <script>
    (function () {
      // ---- Section Switching ----
      var sidebarItems = document.querySelectorAll('.sidebar-item');
      var contentPanels = document.querySelectorAll('.content-panel');

      function switchSection(sectionName) {
        sidebarItems.forEach(function (item) {
          item.classList.toggle('active', item.dataset.section === sectionName);
        });
        contentPanels.forEach(function (panel) {
          panel.classList.toggle('active', panel.dataset.panel === sectionName);
        });

        // Persist active section in URL hash
        history.replaceState(null, '', '#' + sectionName);
      }

      sidebarItems.forEach(function (item) {
        item.addEventListener('click', function () {
          switchSection(item.dataset.section);
        });
      });

      // Restore section from URL hash on load
      var hashSection = location.hash.replace('#', '');
      var validSections = Array.from(sidebarItems).map(function (item) { return item.dataset.section; });
      if (hashSection && validSections.indexOf(hashSection) !== -1) {
        switchSection(hashSection);
      }

      // Handle browser back/forward
      window.addEventListener('hashchange', function () {
        var hs = location.hash.replace('#', '');
        if (hs && validSections.indexOf(hs) !== -1) {
          switchSection(hs);
        }
      });

      // ---- Theme Sync ----
      var iframes = document.querySelectorAll('.content-panel iframe');

      function syncIframeThemes(theme) {
        iframes.forEach(function (iframe) {
          try {
            if (iframe.contentDocument && iframe.contentDocument.documentElement) {
              iframe.contentDocument.documentElement.setAttribute('data-theme', theme);
            }
          } catch (e) { /* cross-origin */ }
          try {
            iframe.contentWindow.postMessage({ type: 'theme-change', theme: theme }, '*');
          } catch (e) {}
        });
      }

      // Sync when each iframe loads
      iframes.forEach(function (iframe) {
        iframe.addEventListener('load', function () {
          var theme = document.documentElement.getAttribute('data-theme') || 'light';
          try {
            if (iframe.contentDocument && iframe.contentDocument.documentElement) {
              iframe.contentDocument.documentElement.setAttribute('data-theme', theme);
            }
          } catch (e) {}
          try {
            iframe.contentWindow.postMessage({ type: 'theme-change', theme: theme }, '*');
          } catch (e) {}
        });
      });

      // Listen for theme changes from parent
      window.addEventListener('message', function (e) {
        if (e.data && e.data.type === 'theme-change') {
          syncIframeThemes(e.data.theme);
        }
      });
    })();
  </script>

</body>
</html>
